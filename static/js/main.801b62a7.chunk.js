(this["webpackJsonp2bit-tile-generator"]=this["webpackJsonp2bit-tile-generator"]||[]).push([[0],{138:function(e,t,a){},167:function(e,t){},169:function(e,t){},285:function(e,t,a){},287:function(e,t,a){"use strict";a.r(t);var i=a(20),n=a.n(i),r=a(127),l=a.n(r),s=(a(138),a(16)),o=a(40),c=a(11),h=a.n(c),m=a(21),d=a(31),p=a(3),u=a(4),g=a(7),b=a(8),j=(a(139),a(66)),x=a(129),f=a(130),v=a(131),O=a(82),y=a(132),k=a(133),C=a(128),P=a.n(C),T=(a(285),a(9)),A=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(T.jsx)("div",{className:"palette-preview",style:{backgroundColor:"#"+this.props.palette}})}}]),a}(n.a.Component),w=["grass","water","block","brick"],B={grass:3,water:2,lava:3,rock:3,brick:2,hole:0,plant:3,block:3},I={grass:"Grass",water:"Water",lava:"Lava",block:"Block / Tile",brick:"Brick Wall",rock:"Rock",hole:"Hole / Gap",plant:"Bush"},M={grass:[{name:"Short Blades",min:0,max:10,type:"range"},{name:"Tall Blades",min:0,max:10,type:"range"},{name:"Triangles",min:0,max:8,type:"range"}],water:[{name:"Lines",min:2,max:4,type:"range"},{name:"Deeper Areas",min:0,max:3,type:"range",disabled:!0,defaultValue:0}],lava:[],rock:[],brick:[{name:"Brick Width",min:5,max:12,type:"range"},{name:"Brick Height",min:2,max:12,type:"range"},{name:"Brick Color",type:"palette",defaultValue:2}],block:[{name:"Height",min:2,max:8,type:"range"}],hole:[],plant:[]};function S(e,t){return(e%t+t)%t}var N=function(e){Object(g.a)(a,e);var t=Object(b.a)(a);function a(e){var i;return Object(p.a)(this,a),(i=t.call(this,e)).state={tileType:"water",tileProps:{},palette:[255,1145324799,2863311615,4294967295],imageWidth:16,imageHeight:16,currentTileImg:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},w.forEach((function(e){i.state.tileProps[e]={},M[e].forEach((function(t){void 0!==t.defaultValue?i.state.tileProps[e][t.name]=t.defaultValue:void 0!==t.min&&void 0!==t.max&&(i.state.tileProps[e][t.name]=Math.floor(Math.random()*(t.max-t.min))+t.min)}))})),i}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.reloadImage()}},{key:"reRandomize",value:function(){var e=this,t={tileProps:Object(d.a)({},this.state.tileProps)};w.forEach((function(a){t.tileProps[a]=Object(d.a)({},e.state.tileProps[a]),M[a].forEach((function(e){e.disabled||void 0!==e.min&&void 0!==e.max&&(t.tileProps[a][e.name]=Math.floor(Math.random()*(e.max-e.min))+e.min)}))})),this.setState(t),this.reloadImage()}},{key:"getRandomImageCoords",value:function(){return{x:Math.floor(Math.random()*this.state.imageWidth),y:Math.floor(Math.random()*this.state.imageHeight)}}},{key:"getTileOptions",value:function(e){var t=this;return M[e].map((function(a){if(a.disabled)return Object(T.jsx)("span",{},"disabled-setting-"+a.type+a.name);switch(a.type){case"range":return Object(T.jsxs)("div",{className:"tile-option",children:[Object(T.jsx)(v.a,{min:a.min,max:a.max,step:a.step||1,label:a.name,value:t.state.tileProps[e][a.name],onSlChange:function(i){return t.updateTileState(e,a.name,i.target.value)}},e+a.name),Object(T.jsxs)("div",{className:"below-range",children:[Object(T.jsx)("small",{className:"left",children:a.min}),Object(T.jsx)("small",{className:"mid",children:t.state.tileProps[e][a.name]}),Object(T.jsx)("small",{className:"right",children:a.max})]})]},"range-"+a.type+a.name);case"palette":return Object(T.jsx)("div",{className:"tile-option",children:Object(T.jsx)(k.a,{label:a.name,children:[0,1,2,3].map((function(i){return Object(T.jsxs)(y.a,{value:i,checked:t.state.tileProps[e][a.name]===i,onSlChange:function(n){return n.target.checked?t.updateTileState(e,a.name,i):null},children:["Color ",i+1,Object(T.jsx)(A,{palette:t.state.palette[i].toString(16).padStart(8,"0")})]},"palette-color"+a.type+a.name+"-"+i)}))})},"palette-"+a.type+a.name);default:return console.error('Unknown tile option type "'.concat(a.type,'" found!'),a),Object(T.jsx)("span",{})}}))}},{key:"getCurrentTileImage",value:function(){var e=this;return new Promise((function(t,a){new P.a(16,16,e.state.palette[B[e.state.tileType]],(function(i,n){i&&a(i);var r=e.state.tileProps[e.state.tileType];switch(e.state.tileType){case"grass":for(var l=0;l<r["Short Blades"];l++){var s=e.getRandomImageCoords(),o=s.x,c=s.y;n.setPixelColor(e.state.palette[2],o,c)}for(var h=0;h<r["Tall Blades"];h++){var m=e.getRandomImageCoords(),d=m.x,p=m.y;n.setPixelColor(e.state.palette[2],d,p),n.setPixelColor(e.state.palette[2],d,0===p?e.state.imageHeight-1:p-1)}for(var u=0;u<r.Triangles;u++){var g=e.getRandomImageCoords(),b=g.x,j=g.y;n.setPixelColor(e.state.palette[2],b>0?b-1:e.state.imageWidth-1,j),n.setPixelColor(e.state.palette[2],b<e.state.imageWidth-1?b+1:0,j),n.setPixelColor(e.state.palette[2],b,j>0?j-1:e.state.imageHeight-1)}case"water":for(var x=function(t){var a=e.getRandomImageCoords(),i=a.x,r=a.y,l=Math.floor(4*Math.random())+3;n.scan(0,0,n.bitmap.width,n.bitmap.height,(function(t,a,s){var o=i-t,c=r-a;o*o+c*c<=l*l&&n.setPixelColor(e.state.palette[1],t,a)}))},f=0;f<r["Deeper Areas"];f++)x();for(var v=0;v<r.Lines;v++){var O=e.getRandomImageCoords(),y=O.x,k=O.y,C=1===Math.floor(2*Math.random())?1:-1,P=1===Math.floor(2*Math.random())?1:-1,T=y,A=k;for(n.setPixelColor(e.state.palette[3],T,A),T=S(T+C,e.state.imageWidth),A=S(A+P,e.state.imageHeight);T!=y&&A!=k;)n.setPixelColor(e.state.palette[3],T,A),Math.random()>.3&&(T=S(T+C,e.state.imageWidth)),Math.random()>.3&&(A=S(A+P,e.state.imageHeight));n.setPixelColor(e.state.palette[3],T,A)}break;case"brick":for(var w=[],B=[],I=0;I<n.bitmap.width;I++)0===S(I+1,r["Brick Width"]+1)?w.push(I):0===S(I+1+Math.floor(r["Brick Width"]/2),r["Brick Width"]+1)&&B.push(I);var M=0;n.scan(0,0,n.bitmap.width,n.bitmap.height,(function(t,a,i){n.setPixelColor(e.state.palette[r["Brick Color"]],t,a),a%(r["Brick Height"]+1)===0&&(n.setPixelColor(e.state.palette[0],t,a),0===t&&++M),M%2===0?-1!==w.indexOf(t)&&n.setPixelColor(e.state.palette[0],t,a):-1!==B.indexOf(t)&&n.setPixelColor(e.state.palette[0],t,a)}));break;case"block":n.scan(0,0,n.bitmap.width,n.bitmap.height,(function(t,a){var i=2*(10-r.Height);n.setPixelColor(t>n.bitmap.height-a-1?e.state.palette[1]:e.state.palette[3],t,a),t===a?n.setPixelColor(e.state.palette[2],t,a):t==n.bitmap.height-a-1&&n.setPixelColor(e.state.palette[1],t,a);var l=n.bitmap.height/2-i/2;t>l&&t<l+i-1&&a>l&&a<l+i-1&&n.setPixelColor(e.state.palette[2],t,a)}));break;default:console.warn("Unimplemented tile type given!",e.state.tileType,"blank image ahoy")}n.getBase64Async("image/png").then(t,a)}))}))}},{key:"reloadImage",value:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getCurrentTileImage();case 3:e.t1=e.sent,e.t2={currentTileImg:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTileType",value:function(e){this.setState({tileType:e.target.value}),this.reloadImage()}},{key:"updateTileState",value:function(e,t,a){this.state.tileProps[e][t]!==a&&(this.setState({tileProps:Object(d.a)(Object(d.a)({},this.state.tileProps),{},Object(o.a)({},e,Object(d.a)(Object(d.a)({},this.state.tileProps[e]),{},Object(o.a)({},t,a))))}),this.reloadImage())}},{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)("header",{className:"App-header",children:Object(T.jsx)("h1",{children:"2Bit Tile Generator"})}),Object(T.jsxs)("section",{children:[Object(T.jsx)("p",{}),Object(T.jsxs)("div",{className:"control-bar",children:[Object(T.jsx)(O.a,{content:"Randomize the settings for all tiles.",children:Object(T.jsx)(j.a,{onClick:function(){return e.reRandomize()},children:"Randomize Settings"})}),Object(T.jsx)(O.a,{content:"Regenerate tile image with the current settings",children:Object(T.jsx)(j.a,{onClick:function(){return e.reloadImage()},children:"Regenerate"})})]}),Object(T.jsxs)("div",{className:"configurator",children:[Object(T.jsxs)("div",{className:"left",children:[Object(T.jsx)("h3",{children:"Tile Preview"}),Object(T.jsx)("h4",{children:"Single"}),Object(T.jsx)("img",{className:"tile-preview",alt:"Tile Preview",src:this.state.currentTileImg}),Object(T.jsx)("h4",{children:"Tiled"}),Object(T.jsx)("div",{className:"tile-preview-collection",children:Object(s.a)(Array(9).keys()).map((function(t){return Object(T.jsx)("img",{alt:"tile"+t,src:e.state.currentTileImg},"preview-"+t)}))}),Object(T.jsx)("div",{className:"dl-bar",children:Object(T.jsx)(j.a,{href:this.state.currentTileImg,download:this.state.tileType+".png",children:"Download"})})]}),Object(T.jsxs)("div",{className:"right",children:[Object(T.jsx)("h3",{children:"Tile Configuration"}),Object(T.jsx)("div",{className:"tile-option",children:Object(T.jsx)(x.a,{label:"Tile Type",value:this.state.tileType,onSlChange:function(t){return e.updateTileType(t)},children:w.map((function(e){return Object(T.jsx)(f.a,{value:e,children:I[e]},e)}))})}),this.getTileOptions(this.state.tileType)]})]})]})]})}}]),a}(n.a.Component),R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,288)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),i(e),n(e),r(e),l(e)}))};l.a.render(Object(T.jsx)(n.a.StrictMode,{children:Object(T.jsx)(N,{})}),document.getElementById("root")),R()}},[[287,1,2]]]);
//# sourceMappingURL=main.801b62a7.chunk.js.map