(this["webpackJsonp2bit-tile-generator"]=this["webpackJsonp2bit-tile-generator"]||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return n})),a.d(t,"h",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"i",(function(){return h}));const s=16,r=16,l=["block","brick","bridge","plant","door","grass","hole","ladder","lava","lockdoor","rock","sand","stairs","tile","water"],i="block",o={grass:3,water:2,lava:3,rock:3,brick:2,hole:0,plant:3,block:3,sand:0,bridge:0,ladder:0,stairs:0,tile:3,door:3,lockdoor:3},n={grass:"Grass",water:"Water",lava:"Lava",block:"Block",brick:"Brick Wall",rock:"Rock",hole:"Hole / Gap",plant:"Bush",sand:"Sand",bridge:"Bridge",ladder:"Ladder",stairs:"Stairs",tile:"Tile",door:"Door",lockdoor:"Locked Door"},c={grass:["grass","grass","grass","grass","grass","grass","grass","grass","grass"],water:["water","water","water","water","water","water","water","water","water"],lava:["sand","lava","lava","sand","lava","lava","sand","lava","lava"],block:["block","block","block","block","grass","grass","block","grass","grass"],brick:["brick","brick","brick","brick","brick","brick","grass","grass","grass"],rock:["sand","sand","sand","rock","rock","rock","sand","sand","sand"],hole:["sand","sand","sand","sand","hole","sand","sand","sand","sand"],plant:["grass","grass","grass","grass","plant","grass","grass","grass","grass"],sand:["sand","sand","sand","sand","sand","sand","sand","sand","sand"],bridge:["water","water","water","bridge","bridge","bridge","water","water","water"],ladder:["rock","ladder","rock","rock","ladder","rock","grass","grass","grass"],stairs:["grass","grass","grass","grass","stairs","grass","grass","grass","grass"],tile:["tile","tile","tile","tile","tile","tile","tile","tile","tile"],door:["tile","tile","tile","brick","door","brick","grass","grass","grass"],lockdoor:["tile","tile","tile","brick","lockdoor","brick","grass","grass","grass"]},d={grass:[{name:"Palette",type:"palette",defaultValue:"NES Default Green"},{name:"Short Blades",min:0,max:10,type:"range",defaultValue:1},{name:"Tall Blades",min:0,max:10,type:"range",defaultValue:0},{name:"Triangles",min:0,max:8,type:"range",defaultValue:4}],water:[{name:"Palette",type:"palette",defaultValue:"NES Default Blue"},{name:"Lines",min:2,max:4,type:"range"},{name:"Deeper Areas",min:0,max:3,type:"range",disabled:!0,defaultValue:0}],lava:[{name:"Palette",type:"palette",defaultValue:"NES Default Red"},{name:"Frequency",min:15,max:25,type:"range"},{name:"Offset",min:0,max:15,type:"range"},{name:"Wave Width",min:4,max:8,type:"range"}],rock:[{name:"Palette",type:"palette",defaultValue:"NES Default Yellow"},{name:"Rock Size",min:3,max:7,type:"range"},{name:"Rock Color",type:"color",defaultValue:2},{name:"Rock Highlight Color",type:"color",defaultValue:3}],brick:[{name:"Palette",type:"palette",defaultValue:"NES Default Red"},{name:"Brick Width",min:5,max:12,type:"range"},{name:"Brick Height",min:2,max:12,type:"range"},{name:"Brick Color",type:"color",defaultValue:2}],block:[{name:"Palette",type:"palette",defaultValue:"NES Default Red"},{name:"Height",min:4,max:8,type:"range"}],tile:[{name:"Palette",type:"palette",defaultValue:"NES Default Red"},{name:"Height",min:2,max:3,type:"range"}],hole:[{name:"Palette",type:"palette",defaultValue:"NES Default Yellow"},{name:"Hole Size",min:6,max:14,type:"range",step:2},{name:"Fuzz Area",min:1,max:2,type:"range",defaultValue:1}],plant:[{name:"Palette",type:"palette",defaultValue:"NES Default Green"},{name:"Bush Size",min:3,max:6,type:"range"},{name:"Bush Color",type:"color",defaultValue:2},{name:"Freckle Color",type:"color",defaultValue:1},{name:"Freckle Count",min:2,max:8,type:"range"},{name:"Freckle Size",min:1,max:2,type:"range",defaultValue:1}],sand:[{name:"Palette",type:"palette",defaultValue:"NES Default Yellow"},{name:"Frequency",min:15,max:75,type:"range"},{name:"Offset",min:0,max:15,type:"range"},{name:"Wave Width",min:3,max:12,type:"range"}],bridge:[{name:"Palette",type:"palette",defaultValue:"NES Default Red"},{name:"Board Width",min:3,max:9,type:"range",step:2,defaultValue:7},{name:"Border Width",min:0,max:2,type:"range",defaultValue:1},{name:"Board Color",type:"color",defaultValue:1},{name:"Separator Color",type:"color",defaultValue:0}],ladder:[{name:"Palette",type:"palette",defaultValue:"NES Default Blue"},{name:"Step Width",min:3,max:9,type:"range",step:2,defaultValue:3},{name:"Border Width",min:0,max:2,type:"range",defaultValue:1},{name:"Step Color",type:"color",defaultValue:3},{name:"Separator Color",type:"color",defaultValue:1}],stairs:[{name:"Palette",type:"palette",defaultValue:"NES Default Red"},{name:"Step Width",min:3,max:9,type:"range",step:2,defaultValue:7},{name:"Step Height",min:1,max:3,type:"range"},{name:"Border Width",min:0,max:2,type:"range",defaultValue:1},{name:"Step Color",type:"color",defaultValue:1},{name:"Separator Color",type:"color",defaultValue:0}],door:[{name:"Palette",type:"palette",defaultValue:"NES Default Yellow"},{name:"Panel Width",min:3,max:8,type:"range",step:1},{name:"Knob Width",min:0,max:2,type:"range",step:1,defaultValue:1},{name:"Door Color",type:"color",defaultValue:3},{name:"Knob Color",type:"color",defaultValue:1}],lockdoor:[{name:"Palette",type:"palette",defaultValue:"NES Default Yellow"},{name:"Panel Width",min:4,max:8,type:"range",step:4},{name:"Lock Width",min:3,max:5,type:"range",step:2,defaultValue:5},{name:"Door Color",type:"color",defaultValue:3},{name:"Lock Color",type:"color",defaultValue:1}]},h=["brick","brick","ladder","brick","grass","grass","grass","block","tile","tile","tile","tile","grass","grass","grass","grass","grass","plant","plant","block","tile","tile","stairs","tile","grass","grass","plant","plant","grass","plant","plant","block","tile","tile","tile","tile","grass","grass","grass","grass","grass","grass","grass","block","lockdoor","block","door","block","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","grass","sand","sand","sand","sand","grass","grass","grass","grass","grass","grass","grass","grass","water","water","water","sand","sand","grass","grass","grass","grass","grass","lava","lava","water","water","water","sand","sand","sand","grass","grass","grass","grass","lava","lava","bridge","bridge","bridge","sand","sand","sand","sand","hole","sand","sand","lava","lava","water","water","water","sand","rock","sand","sand","hole","sand","sand","lava","lava"]},122:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return p}));var s=a(128),r=a(59),l=a(43),i=a(129),o=a(9),n=a.n(o),c=a(49),d=a(26),h=a(4);new TextDecoder("utf8");class p extends n.a.Component{constructor(e){super(e),this.state={}}forceDownload(e,t){let a=document.createElement("a");a.href=e,a.download=t,a.click()}async downloadAll(){const e=await c.a.generateFullSet(this.props.tileImages);this.forceDownload(e,"Tileset.png")}async downloadBin(t){const a=await c.a.generateNesPatternTables(this.props.tileImages,this.props.tileProps,t),s="data:application/octet-stream;base64,"+e.from(a).toString("base64");this.forceDownload(s,"2bit-tile-generator.chr")}async downloadPalette(){let t=new Uint8Array([...d.c["NES Default Blue"],...d.c["NES Default Red"],...d.c["NES Default Green"],...d.c["NES Default Yellow"]]);const a="data:application/octet-stream;base64,"+e.from(t).toString("base64");this.forceDownload(a,"2bit-tile-generator.pal")}render(){return Object(h.jsx)("span",{children:Object(h.jsxs)(s.a,{children:[Object(h.jsx)(l.a,{caret:!0,slot:"trigger",children:"Download"}),Object(h.jsxs)(i.a,{children:[Object(h.jsx)(r.a,{title:"Download a single png file with all tiles",onClick:()=>this.downloadAll(),children:"Download Tile Strip (.png)"}),Object(h.jsx)(r.a,{title:"Download NES binary data, with tile data organized linearly (for games, nesst, etc)",onClick:()=>this.downloadBin(!1),children:"Download linear binary format (.chr)"}),Object(h.jsx)(r.a,{title:"Download NES binary data, with all tiles organized visually into 16x16 tiles (for games, nesst, etc)",onClick:()=>this.downloadBin(!0),children:"Download organized binary format (.chr)"}),Object(h.jsx)(r.a,{title:"Download Default NES Palette file (games, nesst, etc)",onClick:()=>this.downloadPalette(),children:"Download binary palette (.pal)"})]})]})})}}}).call(this,a(5).Buffer)},134:function(e,t,a){},164:function(e,t){},166:function(e,t){},26:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return i}));const s=["Gameboy","NES Default Red","NES Default Blue","NES Default Green","NES Default Yellow"],r={Gameboy:[255,2155905279,3233857791,4294967295],"NES Default Blue":[255,36863,1149829119,2580348927],"NES Default Red":[255,1426063615,2570256639,3714467071],"NES Default Green":[255,288555263,862322943,2008744191],"NES Default Yellow":[255,1717960959,3148480767,4007495935]},l={Gameboy:[15,0,16,48],"NES Default Blue":[15,1,33,49],"NES Default Red":[15,6,22,38],"NES Default Green":[15,9,25,41],"NES Default Yellow":[15,8,24,40]},i=e=>"string"===typeof e?r[e]:r[s[e]]},269:function(e,t,a){},270:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){"use strict";a.r(t);var s=a(9),r=a.n(s),l=a(121),i=a.n(l),o=(a(134),a(135),a(43)),n=a(69),c=a(70),d=a(54),h=a(49),p=(a(269),a(127)),g=a(124),m=a(125),u=a(26),b=(a(270),a(4));class f extends r.a.Component{render(){return Object(b.jsx)("div",{className:"palette-color-preview",style:{backgroundColor:"#"+this.props.color}})}}a(272);class w extends r.a.Component{render(){return Object(b.jsx)("div",{className:"palette-preview",children:this.props.palette.map((e=>Object(b.jsx)(f,{color:e.toString(16).padStart(8,"0")},"prev-"+e)))})}}class x extends r.a.Component{constructor(e){super(e),this.setting=null,this.state=null,this.tileTypeId=null,this.updateTileState=()=>{},this.state=e.state,this.reloadFromProps(e)}UNSAFE_componentWillReceiveProps(e){this.reloadFromProps(e),this.setState(e.state)}reloadFromProps(e){this.setting=e.setting,this.tileTypeId=e.tileTypeId,this.updateTileState=(t,a,s)=>{e.updateTileState(t,a,s)}}render(){const e=this.setting;if(e.disabled||null===e)return Object(b.jsx)("span",{},"disabled-setting-"+e.type+e.name);switch(e.type){case"range":return Object(b.jsxs)("div",{className:"tile-option",children:[Object(b.jsx)(m.a,{min:e.min,max:e.max,step:e.step||1,label:e.name,value:this.state.tileProps[this.tileTypeId][e.name],onSlChange:t=>this.updateTileState(this.tileTypeId,e.name,t.target.value)},this.tileTypeId+e.name),Object(b.jsxs)("div",{className:"below-range",children:[Object(b.jsx)("small",{className:"left",children:e.min}),Object(b.jsxs)("small",{className:"mid",children:["Current: ",this.state.tileProps[this.tileTypeId][e.name]]}),Object(b.jsx)("small",{className:"right",children:e.max})]})]},"range-"+e.type+e.name);case"color":return Object(b.jsx)("div",{className:"tile-option",children:Object(b.jsx)(g.a,{label:e.name,children:[0,1,2,3].map((t=>Object(b.jsxs)(p.a,{value:t,checked:this.state.tileProps[this.tileTypeId][e.name]===t,onSlChange:a=>a.target.checked?this.updateTileState(this.tileTypeId,e.name,t):null,children:["Color ",t+1,Object(b.jsx)(f,{color:Object(u.b)(this.state.tileProps[this.tileTypeId].Palette)[t].toString(16).padStart(8,"0")})]},"palette-color"+e.type+e.name+"-"+t)))})},"palette-"+e.type+e.name);case"palette":return Object(b.jsx)("div",{className:"tile-option",children:Object(b.jsx)(n.a,{label:"Palette Color",value:this.state.tileProps[this.tileTypeId][e.name].replace(/ /g,"_"),onSlChange:t=>this.updateTileState(this.tileTypeId,e.name,t.target.value.replace(/_/g," ")),children:u.a.map((e=>Object(b.jsxs)(c.a,{value:e.replace(/ /g,"_"),children:[e," ",Object(b.jsx)(w,{palette:Object(u.b)(e)})]},e)))})},"palette-"+e.type+e.name);default:return console.error('Unknown tile option type "'.concat(e.type,'" found!'),e),Object(b.jsx)("span",{})}}}a(273);var y=a(10);class j extends r.a.Component{render(){const e=y.h[this.props.tileId].map((e=>this.props.tileImages[e]));return Object(b.jsx)("div",{className:"tile-preview-collection",children:e.map(((e,t)=>Object(b.jsx)("img",{alt:"",src:e},"preview-"+t)))})}}var k=a(126);a(274);class P extends r.a.Component{constructor(e){super(e),this.imageRef=r.a.createRef(),this.state={mapImage:null}}async showDialog(){var e,t;const a=await h.a.generateMapPreview(this.props.tileImages);this.setState({mapImage:a}),null===(e=this.imageRef)||void 0===e||null===(t=e.current)||void 0===t||t.show()}render(){return Object(b.jsxs)("span",{children:[Object(b.jsx)(d.a,{content:"Show a preview image using all of the tiles",children:Object(b.jsx)(o.a,{onClick:()=>this.showDialog(),children:"Preview as map"})}),Object(b.jsx)(k.a,{label:"Map Preview",ref:this.imageRef,className:"map-preview-dialog",children:Object(b.jsx)("img",{alt:"Map Preview",src:this.state.mapImage})})]})}}var C=a(122),S=a(123);a(275);Object(S.a)("https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/");class v extends r.a.Component{constructor(e){super(e),this.state={tileType:y.b,tileProps:{},palette:Object(u.b)(0),currentTileImg:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",builtTileImages:{}},y.a.forEach((e=>{this.state.tileProps[e]={},y.g[e].forEach((t=>{if(void 0!==t.defaultValue)this.state.tileProps[e][t.name]=t.defaultValue;else if(void 0!==t.min&&void 0!==t.max){let a=Math.floor(Math.random()*(t.max-t.min+1))+t.min;t.step&&(a-=a%t.step),this.state.tileProps[e][t.name]=a}})),this.state.builtTileImages[e]=null}));try{const e=localStorage.getItem("2bit-tile-generator__tileType");null!==e&&(this.state.tileType=e)}catch(t){console.info("Failed getting information from localStorage, sticking to default",t)}}async componentDidMount(){for(let e=0;e<y.a.length;e++)await this.generateTileImage(y.a[e],!1);this.reloadImage()}reRandomize(){let e={tileProps:{...this.state.tileProps}};y.a.forEach((t=>{e.tileProps[t]={...this.state.tileProps[t]},y.g[t].forEach((a=>{if(!a.disabled&&void 0!==a.min&&void 0!==a.max){let s=Math.floor(Math.random()*(a.max-a.min+1))+a.min;a.step&&(s-=s%a.step),e.tileProps[t][a.name]=s}}))})),this.setState(e,this.reloadImage)}async generateTileImage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.state.palette;if(this.state.tileProps[e].Palette&&(a=Object(u.b)(this.state.tileProps[e].Palette)),null===this.state.builtTileImages[e]||t){let t=await h.a.generateImage(e,this.state.tileProps[e],a);return this.setState({builtTileImages:{...this.state.builtTileImages,[e]:t}}),t}return this.state.builtTileImages[e]}async getCurrentTileImage(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return await this.generateTileImage(this.state.tileType,e)}async reloadImage(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({currentTileImg:await this.getCurrentTileImage(e)})}updateTileType(e){this.setState({tileType:e.target.value},(()=>this.reloadImage(!1))),localStorage.setItem("2bit-tile-generator__tileType",e.target.value)}updateTileState(e,t,a){this.state.tileProps[e][t]!==a&&this.setState({tileProps:{...this.state.tileProps,[e]:{...this.state.tileProps[e],[t]:a}}},this.reloadImage)}render(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("header",{className:"App-header",children:Object(b.jsx)("h1",{children:"2Bit Tile Generator"})}),Object(b.jsxs)("section",{children:[Object(b.jsxs)("div",{className:"control-bar",children:[Object(b.jsx)(P,{tileImages:this.state.builtTileImages}),Object(b.jsx)(C.a,{tileImages:this.state.builtTileImages,tileProps:this.state.tileProps}),Object(b.jsx)(d.a,{content:"Randomize the settings for all tiles.",children:Object(b.jsx)(o.a,{onClick:()=>this.reRandomize(),children:"Randomize Settings"})}),Object(b.jsx)(d.a,{content:"Regenerate tile image with the current settings",children:Object(b.jsx)(o.a,{onClick:()=>this.reloadImage(!0),children:"Regenerate"})})]}),Object(b.jsxs)("div",{className:"configurator",children:[Object(b.jsxs)("div",{className:"left",children:[Object(b.jsx)("h3",{children:"Tile Preview"}),Object(b.jsx)("h4",{children:"Single"}),Object(b.jsx)("img",{className:"tile-preview",alt:"Tile Preview",src:this.state.currentTileImg}),Object(b.jsx)("h4",{children:"Tiled"}),Object(b.jsx)(j,{tileId:this.state.tileType,tileImages:this.state.builtTileImages}),Object(b.jsx)("div",{className:"dl-bar",children:Object(b.jsx)(o.a,{href:this.state.currentTileImg,download:this.state.tileType+".png",children:"Download"})})]}),Object(b.jsxs)("div",{className:"right",children:[Object(b.jsx)("h3",{children:"Tile Configuration"}),Object(b.jsx)("div",{className:"tile-option",children:Object(b.jsx)(n.a,{label:"Tile Type",value:this.state.tileType,onSlChange:e=>this.updateTileType(e),className:"tile-type-select",children:y.a.map((e=>Object(b.jsxs)(c.a,{value:e,children:[y.f[e]," ",Object(b.jsx)("img",{alt:"",slot:"suffix",src:this.state.builtTileImages[e]})," "]},e)))})}),y.g[this.state.tileType].map((e=>Object(b.jsx)(x,{setting:e,state:this.state,tileTypeId:this.state.tileType,updateTileState:(e,t,a)=>this.updateTileState(e,t,a)},this.state.tileType+e.name)))]})]})]}),Object(b.jsxs)("footer",{children:[Object(b.jsxs)("p",{children:["Heavily inspired by ",Object(b.jsx)("a",{href:"https://0x72.itch.io/2bitcharactergenerator",target:"_blank",children:"0x72's 2BitCharactersGenerator"}),". UI powered by ",Object(b.jsx)("a",{href:"https://shoelace.style/",target:"_blank",children:"Shoelace"}),"."]}),Object(b.jsxs)("p",{children:["All images generated by this tool are free for use. (CC0) Tool available under the MIT license. (",Object(b.jsx)("a",{href:"https://gh.nes.science/2bit-tile-generator",target:"_blank",children:"Source"})," \u2022 "," ",Object(b.jsx)("a",{href:"https://gh.nes.science/2bit-tile-generator/issues",target:"_blank",children:"Feature Requests"}),")"]}),Object(b.jsxs)("p",{children:["Wanna see the other stuff I do? Check out ",Object(b.jsx)("a",{href:"https://nes.science",target:"_blank",children:"nes.science"}),"."]}),Object(b.jsx)(d.a,{content:"Click for changelog",children:Object(b.jsxs)("a",{className:"version",href:"https://gh.nes.science/2bit-tile-generator/blob/main/CHANGELOG.md",target:"_blank",children:["version ","1.2.3"]})})]})]})}}var O=v;var T=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,277)).then((t=>{let{getCLS:a,getFID:s,getFCP:r,getLCP:l,getTTFB:i}=t;a(e),s(e),r(e),l(e),i(e)}))};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),T()},49:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return c}));var s=a(55),r=a.n(s),l=a(26),i=a(10);function o(e,t){return(e%t+t)%t}function n(e){return{x:Math.floor(Math.random()*e.bitmap.width),y:Math.floor(Math.random()*e.bitmap.height)}}class c{static generateImage(e,t,a){return new Promise(((s,l)=>{new r.a(i.d,i.c,a[i.e[e]],(async(r,i)=>{switch(r&&l(r),e){case"grass":await c.drawGrass(i,t,a);break;case"water":await c.drawWater(i,t,a);break;case"brick":await c.drawBrick(i,t,a);break;case"tile":case"block":await c.drawBlock(i,t,a);break;case"hole":await c.drawHole(i,t,a);break;case"plant":await c.drawPlant(i,t,a);break;case"rock":await c.drawRock(i,t,a);break;case"lava":await c.drawLava(i,t,a);break;case"sand":await c.drawSand(i,t,a);break;case"bridge":await c.drawBridge(i,t,a);break;case"ladder":await c.drawLadder(i,t,a);break;case"stairs":await c.drawStairs(i,t,a);break;case"door":await c.drawDoor(i,t,a);break;case"lockdoor":await c.drawLockedDoor(i,t,a);break;default:console.warn("Unimplemented tile type given!",e,"blank image ahoy")}i.getBase64Async("image/png").then(s,l)}))}))}static drawGrass(e,t,a){for(let s=0;s<t["Short Blades"];s++){const{x:t,y:s}=n(e);e.setPixelColor(a[2],t,s)}for(let s=0;s<t["Tall Blades"];s++){const{x:t,y:s}=n(e);e.setPixelColor(a[2],t,s),e.setPixelColor(a[2],t,0===s?e.bitmap.height-1:s-1)}for(let s=0;s<t.Triangles;s++){const{x:t,y:s}=n(e);e.setPixelColor(a[2],t>0?t-1:e.bitmap.width-1,s),e.setPixelColor(a[2],t<e.bitmap.width-1?t+1:0,s),e.setPixelColor(a[2],t,s>0?s-1:e.bitmap.height-1)}}static drawWater(e,t,a){for(let s=0;s<t["Deeper Areas"];s++){const{x:t,y:s}=n(e),r=Math.floor(4*Math.random())+3;e.scan(0,0,e.bitmap.width,e.bitmap.height,((l,i,o)=>{const n=t-l,c=s-i;n*n+c*c<=r*r&&e.setPixelColor(a[1],l,i)}))}for(let s=0;s<t.Lines;s++){const{x:t,y:s}=n(e),r=1===Math.floor(2*Math.random())?1:-1,l=1===Math.floor(2*Math.random())?1:-1;let i=t,c=s;for(e.setPixelColor(a[3],i,c),i=o(i+r,e.bitmap.width),c=o(c+l,e.bitmap.height);i!==t&&c!==s;)e.setPixelColor(a[3],i,c),Math.random()>.3&&(i=o(i+r,e.bitmap.width)),Math.random()>.3&&(c=o(c+l,e.bitmap.height));e.setPixelColor(a[3],i,c)}}static drawBrick(e,t,a){const s=[],r=[];for(var l=0;l<e.bitmap.width;l++)0===o(l+1,t["Brick Width"]+1)?s.push(l):0===o(l+1+Math.floor(t["Brick Width"]/2),t["Brick Width"]+1)&&r.push(l);let i=0;e.scan(0,0,e.bitmap.width,e.bitmap.height,((l,o,n)=>{e.setPixelColor(a[t["Brick Color"]],l,o),o%(t["Brick Height"]+1)===0&&(e.setPixelColor(a[0],l,o),0===l&&++i),i%2===0?-1!==s.indexOf(l)&&e.setPixelColor(a[0],l,o):-1!==r.indexOf(l)&&e.setPixelColor(a[0],l,o)}))}static drawBlock(e,t,a){e.scan(0,0,e.bitmap.width,e.bitmap.height,((s,r)=>{const l=2*(10-t.Height);e.setPixelColor(s>e.bitmap.height-r-1?a[1]:a[3],s,r),s===r?e.setPixelColor(a[2],s,r):s===e.bitmap.height-r-1&&e.setPixelColor(a[1],s,r);const i=e.bitmap.height/2-l/2;s>i&&s<i+l-1&&r>i&&r<i+l-1&&e.setPixelColor(a[2],s,r)}))}static drawHole(e,t,a){const s=Math.floor(e.bitmap.width/2-t["Hole Size"]/2),r=t["Fuzz Area"];e.scan(0,0,e.bitmap.width,e.bitmap.height,((l,i)=>{if(l<s||l>e.bitmap.width-1-s||i<s||i>e.bitmap.height-1-s){if((l>=s-r&&l<s&&i>s&&i<e.bitmap.height-1-s||l>=s+t["Hole Size"]&&l<s+t["Hole Size"]+r&&i>s&&i<e.bitmap.height-1-s||i>=s-r&&i<s&&l>s&&l<e.bitmap.width-1-s||i>=s+t["Hole Size"]&&i<s+t["Hole Size"]+r&&l>s&&l<e.bitmap.width-1-s)&&Math.random()>.35)return;e.setPixelColor(a[2],l,i)}}))}static drawPlant(e,t,a){const s=t["Bush Size"],r=10-Math.floor(t["Bush Size"]/2);let l,i,o;for(var n=0;n<360;n++)l=n,i=s*Math.cos(l*Math.PI/180),o=s*Math.sin(l*Math.PI/180),e.setPixelColor(a[0],Math.round(8+i),Math.round(r+o));for(var c=0;c<e.bitmap.height;c++){let s=!1,r=!1,l=!1,i=0;for(var d=0;d<e.bitmap.width;d++)e.getPixelColor(d,c)===a[0]?(i++,s?r&&(l=!0):s=!0):(s&&e.getPixelColor(d,c)===a[3]&&(r=!0),r&&!l&&i<5&&e.setPixelColor(a[t["Bush Color"]],d,c))}for(let p=8-Math.floor(s/2)+1;p<8+s+1;p++)e.setPixelColor(a[0],p,r+s+1),p<8+s&&e.setPixelColor(a[0],p,r+s);let h=0;for(n=0;n<100&&!(h>=t["Freckle Count"]);n++){const s=Math.floor(Math.random()*e.bitmap.width),r=Math.floor(Math.random()*e.bitmap.height);e.getPixelColor(s,r)===a[t["Bush Color"]]&&(h++,e.setPixelColor(a[t["Freckle Color"]],s,r),t["Freckle Size"]>1&&[[s-1,r],[s+1,r],[s,r-1],[s,r+1]].forEach((s=>{const r=s[0],l=s[1];e.getPixelColor(r,l)===a[t["Bush Color"]]&&e.setPixelColor(a[t["Freckle Color"]],r,l)})))}}static async drawRock(e,t,a){const s=await r.a.read(e),l=t["Rock Size"],i=s.bitmap.height-(t["Rock Size"]-2);let o,n,c;for(var d=0;d<360;d++)o=d,n=l*Math.cos(o*Math.PI/180),c=l*Math.sin(o*Math.PI/180),s.setPixelColor(a[0],Math.round(8+n),Math.round(i+c));for(var h=0;h<s.bitmap.height;h++){let e=!1,r=!1,i=!1,o=0;for(var p=0;p<s.bitmap.width;p++)s.getPixelColor(p,h)===a[0]?(o++,e?r&&(i=!0):e=!0):(e&&s.getPixelColor(p,h)===a[3]&&(r=!0),r&&!i&&o<5&&(p-h<l-Math.floor(l/1.2)?s.setPixelColor(a[t["Rock Color"]],p,h):s.setPixelColor(a[t["Rock Highlight Color"]],p,h)))}await e.blit(s,0,-1-Math.floor(e.bitmap.height/2-t["Rock Size"]))}static async drawLava(e,t,a){const s=t.Frequency/100,r=t.Offset,l=t["Wave Width"];for(let i=0;i<e.bitmap.width;i++){let t=Math.sin(s*(Math.abs(i-r)%e.bitmap.width))*Math.floor(e.bitmap.height/3);for(;t<e.bitmap.width;)e.setPixelColor(4278255615,t,i),t+=l;let o=1;for(t=0;t<e.bitmap.width;t++)4278255615===e.getPixelColor(t,i)&&(o=1+(o+1)%3),e.setPixelColor(a[o],t,i)}}static async drawSand(e,t,a){const s=t.Frequency/100,r=t.Offset,l=t["Wave Width"];for(let i=0;i<e.bitmap.width;i++){let t=Math.sin(s*(Math.abs(i-r)%e.bitmap.width))*Math.floor(e.bitmap.height/3);for(;t<e.bitmap.width;)e.setPixelColor(4278255615,t,i),t+=l;let o=2;for(t=0;t<e.bitmap.width;t++)4278255615===e.getPixelColor(t,i)&&(o=2+(o+1)%2),e.setPixelColor(a[o],t,i)}}static async drawBridge(e,t,a){e.scan(0,0,e.bitmap.width,e.bitmap.height,((s,r)=>{s%(t["Board Width"]+1)===0||r<t["Border Width"]||r>e.bitmap.width-t["Border Width"]-1?e.setPixelColor(a[t["Separator Color"]],s,r):e.setPixelColor(a[t["Board Color"]],s,r)}))}static async drawLadder(e,t,a){e.scan(0,0,e.bitmap.width,e.bitmap.height,((s,r)=>{r%(t["Step Width"]+1)===0||s<t["Border Width"]||s>e.bitmap.width-t["Border Width"]-1?e.setPixelColor(a[t["Separator Color"]],s,r):e.setPixelColor(a[t["Step Color"]],s,r)}))}static async drawBaseDoor(e,t,a){e.scan(0,0,e.bitmap.width,1,((t,s)=>e.setPixelColor(a[0],t,s))),e.scan(0,0,1,e.bitmap.height,((t,s)=>e.setPixelColor(a[0],t,s))),e.scan(e.bitmap.width-1,0,e.bitmap.width,e.bitmap.height,((t,s)=>e.setPixelColor(a[0],t,s))),e.scan(0,0,e.bitmap.width,e.bitmap.height,((s,r)=>{s%t["Panel Width"]===0?e.setPixelColor(a[0],s,r):e.getPixelColor(s,r)!==a[0]&&e.setPixelColor(a[t["Door Color"]],s,r)}))}static async drawDoor(e,t,a){await this.drawBaseDoor(e,t,a);const s=Math.floor(e.bitmap.height/2-t["Knob Width"])+1,r=e.bitmap.width-3-Math.floor(t["Knob Width"]/2);e.scan(r,s,t["Knob Width"],t["Knob Width"],((s,r)=>e.setPixelColor(a[t["Knob Color"]],s,r)))}static async drawLockedDoor(e,t,a){await this.drawBaseDoor(e,t,a);const s=Math.floor(e.bitmap.height/2-4+1),r=Math.floor(e.bitmap.width/2)-Math.floor(t["Lock Width"]/2);e.scan(r+Math.floor(t["Lock Width"]/2),s,1,5===t["Lock Width"]?9:8,((s,r)=>e.setPixelColor(a[t["Lock Color"]],s,r))),e.scan(r,s,Math.floor(t["Lock Width"]/2),8,((s,r)=>{(r<10||5===t["Lock Width"]&&7===s)&&e.setPixelColor(a[t["Lock Color"]],s,r)})),e.scan(r+1+Math.floor(t["Lock Width"]/2),s,Math.floor(t["Lock Width"]/2),8,((s,r)=>{(r<10||5===t["Lock Width"]&&9===s)&&e.setPixelColor(a[t["Lock Color"]],s,r)}))}static async drawStairs(e,t,a){e.scan(0,0,e.bitmap.width,e.bitmap.height,((s,r)=>{let l=Math.floor((s-1)/t["Step Width"])*t["Step Height"];s%(t["Step Width"]+1)===0||r<t["Border Width"]+l||r>e.bitmap.width-t["Border Width"]-1?e.setPixelColor(a[t["Separator Color"]],s,r):e.setPixelColor(a[t["Step Color"]],s,r)}))}static async imageFromBase64(t){return t=t.substr(t.indexOf(",")+1),await r.a.read(e.from(t,"base64"))}static generateFullSet(e){return new Promise(((t,a)=>{new r.a(i.d*(i.a.length+1),i.c,4294967295,((s,r)=>{s&&a(s),(async()=>{for(let t=0;t<i.a.length;t++){let a=await this.imageFromBase64(e[i.a[t]]);await r.blit(a,(t+1)*i.d,0)}return r.getBase64Async("image/png")})().then(t,a)}))}))}static generateMapPreview(e){const t=Math.sqrt(i.i.length);return new Promise(((a,s)=>{new r.a(i.d*t,i.c*t,4294967295,((r,l)=>{r&&s(r),(async()=>{let a={},s={};for(let t=0;t<i.a.length;t++){let r=e[i.a[t]];r=r.substr(r.indexOf(",")+1),a[i.a[t]]=await this.imageFromBase64(e[i.a[t]]),s[i.a[t]]=!1}for(var r=0;r<t;r++)for(var o=0;o<t;o++){const e=o*t+r;l.blit(a[i.i[e]],r*i.d,o*i.c),s[i.i[e]]=!0}const n=i.a.filter((e=>!s[e]));return n.length>0&&console.warn("Some tiles were not included in the preview!",n.join(", ")),l.getBase64Async("image/png")})().then(a,s)}))}))}static async generateNesPatternTables(e,t,a){let s=[];for(var r=0;r<i.a.length;r++){const a=i.a[r],o=await this.imageFromBase64(e[a]),n=new Array(o.bitmap.width*o.bitmap.height),c=l.d[t[a].Palette];o.scan(0,0,o.bitmap.width,o.bitmap.height,((e,t)=>{const a=o.getPixelColor(e,t);n[e+t*o.bitmap.width]=c.indexOf(a)}));let d=n.map((e=>1&e)),h=n.map((e=>(2&e)>>1)),p=[],g=[],m=[],u=[],b=[],f=[],w=[],x=[];for(let e=0;e<4;e++)for(let t=0;t<8;t++){0===e&&(p.push(0),g.push(0),b.push(0),w.push(0),m.push(0),u.push(0),f.push(0),x.push(0));for(let a=0;a<8;a++)0===e?(p[t]+=d[t*o.bitmap.width+a]<<7-a,m[t]+=h[t*o.bitmap.width+a]<<7-a):1===e?(g[t]+=d[t*o.bitmap.width+a+8]<<7-a,u[t]+=h[t*o.bitmap.width+a+8]<<7-a):2===e?(b[t]+=d[t*o.bitmap.width+a+128]<<7-a,f[t]+=h[t*o.bitmap.width+a+128]<<7-a):(w[t]+=d[t*o.bitmap.width+a+128+8]<<7-a,x[t]+=h[t*o.bitmap.width+a+128+8]<<7-a)}s=[...s,...p,...m,...g,...u,...b,...f,...w,...x]}if(s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,...s],!a)return new Uint8Array(s);let o=new Array(4096).fill(0);for(let l=0;l<i.a.length+1;l++){const e=l%8,t=512*Math.floor(l/8)+16*e*2,a=4*l*16;for(let r=0;r<32;r++)o[t+r]=s[a+r];for(let r=0;r<32;r++)o[t+256+r]=s[a+r+32]}return new Uint8Array(o)}}}).call(this,a(5).Buffer)}},[[276,1,2]]]);
//# sourceMappingURL=main.fe7ae9c1.chunk.js.map