(this["webpackJsonp2bit-tile-generator"]=this["webpackJsonp2bit-tile-generator"]||[]).push([[0],{138:function(e,t,a){},167:function(e,t){},169:function(e,t){},285:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var r=a(21),i=a.n(r),n=a(127),l=a.n(n),o=(a(138),a(16)),s=a(40),c=a(10),h=a.n(c),m=a(20),u=a(31),p=a(3),d=a(4),b=a(8),f=a(9),g=(a(139),a(66)),x=a(129),j=a(130),v=a(131),k=a(82),y=a(132),O=a(133),C=a(128),P=a.n(C),w=["block","brick","plant","grass","hole","water","rock"],M={grass:3,water:2,lava:3,rock:3,brick:2,hole:0,plant:3,block:3},T={grass:"Grass",water:"Water",lava:"Lava",block:"Block / Tile",brick:"Brick Wall",rock:"Rock",hole:"Hole / Gap",plant:"Bush"},A={grass:[{name:"Short Blades",min:0,max:10,type:"range"},{name:"Tall Blades",min:0,max:10,type:"range"},{name:"Triangles",min:0,max:8,type:"range"}],water:[{name:"Lines",min:2,max:4,type:"range"},{name:"Deeper Areas",min:0,max:3,type:"range",disabled:!0,defaultValue:0}],lava:[],rock:[{name:"Rock Size",min:3,max:7,type:"range"},{name:"Rock Color",type:"palette",defaultValue:2},{name:"Rock Highlight Color",type:"palette",defaultValue:3}],brick:[{name:"Brick Width",min:5,max:12,type:"range"},{name:"Brick Height",min:2,max:12,type:"range"},{name:"Brick Color",type:"palette",defaultValue:2}],block:[{name:"Height",min:2,max:8,type:"range"}],hole:[{name:"Hole Size",min:6,max:14,type:"range",step:2},{name:"Fuzz Area",min:1,max:2,type:"range",defaultValue:1}],plant:[{name:"Bush Size",min:3,max:6,type:"range"},{name:"Bush Color",type:"palette",defaultValue:2},{name:"Freckle Color",type:"palette",defaultValue:1},{name:"Freckle Count",min:2,max:8,type:"range"},{name:"Freckle Size",min:1,max:2,type:"range",defaultValue:1}]};function B(e,t){return(e%t+t)%t}function S(e){return{x:Math.floor(Math.random()*e.bitmap.width),y:Math.floor(Math.random()*e.bitmap.height)}}var I=function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,null,[{key:"generateImage",value:function(t,a,r){return new Promise((function(i,n){new P.a(16,16,r[M[t]],(function(l,o){switch(l&&n(l),t){case"grass":e.drawGrass(o,a,r);break;case"water":e.drawWater(o,a,r);break;case"brick":e.drawBrick(o,a,r);break;case"block":e.drawBlock(o,a,r);break;case"hole":e.drawHole(o,a,r);break;case"plant":e.drawPlant(o,a,r);break;case"rock":e.drawRock(o,a,r);default:console.warn("Unimplemented tile type given!",t,"blank image ahoy")}o.getBase64Async("image/png").then(i,n)}))}))}},{key:"drawGrass",value:function(e,t,a){for(var r=0;r<t["Short Blades"];r++){var i=S(e),n=i.x,l=i.y;e.setPixelColor(a[2],n,l)}for(var o=0;o<t["Tall Blades"];o++){var s=S(e),c=s.x,h=s.y;e.setPixelColor(a[2],c,h),e.setPixelColor(a[2],c,0===h?e.bitmap.height-1:h-1)}for(var m=0;m<t.Triangles;m++){var u=S(e),p=u.x,d=u.y;e.setPixelColor(a[2],p>0?p-1:e.bitmap.width-1,d),e.setPixelColor(a[2],p<e.bitmap.width-1?p+1:0,d),e.setPixelColor(a[2],p,d>0?d-1:e.bitmap.height-1)}}},{key:"drawWater",value:function(e,t,a){for(var r=function(t){var r=S(e),i=r.x,n=r.y,l=Math.floor(4*Math.random())+3;e.scan(0,0,e.bitmap.width,e.bitmap.height,(function(t,r,o){var s=i-t,c=n-r;s*s+c*c<=l*l&&e.setPixelColor(a[1],t,r)}))},i=0;i<t["Deeper Areas"];i++)r();for(var n=0;n<t.Lines;n++){var l=S(e),o=l.x,s=l.y,c=1===Math.floor(2*Math.random())?1:-1,h=1===Math.floor(2*Math.random())?1:-1,m=o,u=s;for(e.setPixelColor(a[3],m,u),m=B(m+c,e.bitmap.width),u=B(u+h,e.bitmap.height);m!==o&&u!==s;)e.setPixelColor(a[3],m,u),Math.random()>.3&&(m=B(m+c,e.bitmap.width)),Math.random()>.3&&(u=B(u+h,e.bitmap.height));e.setPixelColor(a[3],m,u)}}},{key:"drawBrick",value:function(e,t,a){for(var r=[],i=[],n=0;n<e.bitmap.width;n++)0===B(n+1,t["Brick Width"]+1)?r.push(n):0===B(n+1+Math.floor(t["Brick Width"]/2),t["Brick Width"]+1)&&i.push(n);var l=0;e.scan(0,0,e.bitmap.width,e.bitmap.height,(function(n,o,s){e.setPixelColor(a[t["Brick Color"]],n,o),o%(t["Brick Height"]+1)===0&&(e.setPixelColor(a[0],n,o),0===n&&++l),l%2===0?-1!==r.indexOf(n)&&e.setPixelColor(a[0],n,o):-1!==i.indexOf(n)&&e.setPixelColor(a[0],n,o)}))}},{key:"drawBlock",value:function(e,t,a){e.scan(0,0,e.bitmap.width,e.bitmap.height,(function(r,i){var n=2*(10-t.Height);e.setPixelColor(r>e.bitmap.height-i-1?a[1]:a[3],r,i),r===i?e.setPixelColor(a[2],r,i):r===e.bitmap.height-i-1&&e.setPixelColor(a[1],r,i);var l=e.bitmap.height/2-n/2;r>l&&r<l+n-1&&i>l&&i<l+n-1&&e.setPixelColor(a[2],r,i)}))}},{key:"drawHole",value:function(e,t,a){var r=Math.floor(e.bitmap.width/2-t["Hole Size"]/2),i=t["Fuzz Area"];e.scan(0,0,e.bitmap.width,e.bitmap.height,(function(n,l){if(n<r||n>e.bitmap.width-1-r||l<r||l>e.bitmap.height-1-r){if((n>=r-i&&n<r&&l>r&&l<e.bitmap.height-1-r||n>=r+t["Hole Size"]&&n<r+t["Hole Size"]+i&&l>r&&l<e.bitmap.height-1-r||l>=r-i&&l<r&&n>r&&n<e.bitmap.width-1-r||l>=r+t["Hole Size"]&&l<r+t["Hole Size"]+i&&n>r&&n<e.bitmap.width-1-r)&&Math.random()>.35)return;e.setPixelColor(a[2],n,l)}}))}},{key:"drawPlant",value:function(e,t,a){for(var r,i,n,l=t["Bush Size"],o=10-Math.floor(t["Bush Size"]/2),s=0;s<360;s++)r=s,i=l*Math.cos(r*Math.PI/180),n=l*Math.sin(r*Math.PI/180),e.setPixelColor(a[0],Math.round(8+i),Math.round(o+n));for(var c=0;c<e.bitmap.height;c++)for(var h=!1,m=!1,u=!1,p=0,d=0;d<e.bitmap.width;d++)e.getPixelColor(d,c)===a[0]?(p++,h?m&&(u=!0):h=!0):(h&&e.getPixelColor(d,c)===a[3]&&(m=!0),m&&!u&&p<5&&e.setPixelColor(a[t["Bush Color"]],d,c));for(var b=8-Math.floor(l/2)+1;b<8+l+1;b++)e.setPixelColor(a[0],b,o+l+1),b<8+l&&e.setPixelColor(a[0],b,o+l);var f=0;for(s=0;s<100&&!(f>=t["Freckle Count"]);s++){var g=Math.floor(Math.random()*e.bitmap.width),x=Math.floor(Math.random()*e.bitmap.height);e.getPixelColor(g,x)===a[t["Bush Color"]]&&(f++,e.setPixelColor(a[t["Freckle Color"]],g,x),t["Freckle Size"]>1&&[[g-1,x],[g+1,x],[g,x-1],[g,x+1]].forEach((function(r){var i=r[0],n=r[1];e.getPixelColor(i,n)===a[t["Bush Color"]]&&e.setPixelColor(a[t["Freckle Color"]],i,n)})))}}},{key:"drawRock",value:function(e,t,a){for(var r,i,n,l=t["Rock Size"],o=e.bitmap.height-(t["Rock Size"]-2),s=0;s<360;s++)r=s,i=l*Math.cos(r*Math.PI/180),n=l*Math.sin(r*Math.PI/180),e.setPixelColor(a[0],Math.round(8+i),Math.round(o+n));for(var c=0;c<e.bitmap.height;c++)for(var h=!1,m=!1,u=!1,p=0,d=0;d<e.bitmap.width;d++)e.getPixelColor(d,c)===a[0]?(p++,h?m&&(u=!0):h=!0):(h&&e.getPixelColor(d,c)===a[3]&&(m=!0),m&&!u&&p<5&&(d-c<l-Math.floor(l/1.2)?e.setPixelColor(a[t["Rock Color"]],d,c):e.setPixelColor(a[t["Rock Highlight Color"]],d,c)))}}]),e}(),z=(a(285),a(5)),H=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(z.jsx)("div",{className:"palette-preview",style:{backgroundColor:"#"+this.props.palette}})}}]),a}(i.a.Component),R=(a(287),function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).state={tileType:"block",tileProps:{},palette:[255,1145324799,2863311615,4294967295],imageWidth:16,imageHeight:16,currentTileImg:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},w.forEach((function(e){r.state.tileProps[e]={},A[e].forEach((function(t){if(void 0!==t.defaultValue)r.state.tileProps[e][t.name]=t.defaultValue;else if(void 0!==t.min&&void 0!==t.max){var a=Math.floor(Math.random()*(t.max-t.min+1))+t.min;t.step&&(a-=a%t.step),r.state.tileProps[e][t.name]=a}}))})),r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.reloadImage()}},{key:"reRandomize",value:function(){var e=this,t={tileProps:Object(u.a)({},this.state.tileProps)};w.forEach((function(a){t.tileProps[a]=Object(u.a)({},e.state.tileProps[a]),A[a].forEach((function(e){if(!e.disabled&&void 0!==e.min&&void 0!==e.max){var r=Math.floor(Math.random()*(e.max-e.min+1))+e.min;e.step&&(r-=r%e.step),t.tileProps[a][e.name]=r}}))})),this.setState(t,this.reloadImage)}},{key:"getTileOptions",value:function(e){var t=this;return A[e].map((function(a){if(a.disabled)return Object(z.jsx)("span",{},"disabled-setting-"+a.type+a.name);switch(a.type){case"range":return Object(z.jsxs)("div",{className:"tile-option",children:[Object(z.jsx)(v.a,{min:a.min,max:a.max,step:a.step||1,label:a.name,value:t.state.tileProps[e][a.name],onSlChange:function(r){return t.updateTileState(e,a.name,r.target.value)}},e+a.name),Object(z.jsxs)("div",{className:"below-range",children:[Object(z.jsx)("small",{className:"left",children:a.min}),Object(z.jsxs)("small",{className:"mid",children:["Current: ",t.state.tileProps[e][a.name]]}),Object(z.jsx)("small",{className:"right",children:a.max})]})]},"range-"+a.type+a.name);case"palette":return Object(z.jsx)("div",{className:"tile-option",children:Object(z.jsx)(O.a,{label:a.name,children:[0,1,2,3].map((function(r){return Object(z.jsxs)(y.a,{value:r,checked:t.state.tileProps[e][a.name]===r,onSlChange:function(i){return i.target.checked?t.updateTileState(e,a.name,r):null},children:["Color ",r+1,Object(z.jsx)(H,{palette:t.state.palette[r].toString(16).padStart(8,"0")})]},"palette-color"+a.type+a.name+"-"+r)}))})},"palette-"+a.type+a.name);default:return console.error('Unknown tile option type "'.concat(a.type,'" found!'),a),Object(z.jsx)("span",{})}}))}},{key:"getCurrentTileImage",value:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.generateImage(this.state.tileType,this.state.tileProps[this.state.tileType],this.state.palette);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reloadImage",value:function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getCurrentTileImage();case 3:e.t1=e.sent,e.t2={currentTileImg:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTileType",value:function(e){this.setState({tileType:e.target.value},this.reloadImage)}},{key:"updateTileState",value:function(e,t,a){this.state.tileProps[e][t]!==a&&this.setState({tileProps:Object(u.a)(Object(u.a)({},this.state.tileProps),{},Object(s.a)({},e,Object(u.a)(Object(u.a)({},this.state.tileProps[e]),{},Object(s.a)({},t,a))))},this.reloadImage)}},{key:"render",value:function(){var e=this;return Object(z.jsxs)("div",{className:"App",children:[Object(z.jsx)("header",{className:"App-header",children:Object(z.jsx)("h1",{children:"2Bit Tile Generator"})}),Object(z.jsxs)("section",{children:[Object(z.jsx)("p",{}),Object(z.jsxs)("div",{className:"control-bar",children:[Object(z.jsx)(k.a,{content:"Randomize the settings for all tiles.",children:Object(z.jsx)(g.a,{onClick:function(){return e.reRandomize()},children:"Randomize Settings"})}),Object(z.jsx)(k.a,{content:"Regenerate tile image with the current settings",children:Object(z.jsx)(g.a,{onClick:function(){return e.reloadImage()},children:"Regenerate"})})]}),Object(z.jsxs)("div",{className:"configurator",children:[Object(z.jsxs)("div",{className:"left",children:[Object(z.jsx)("h3",{children:"Tile Preview"}),Object(z.jsx)("h4",{children:"Single"}),Object(z.jsx)("img",{className:"tile-preview",alt:"Tile Preview",src:this.state.currentTileImg}),Object(z.jsx)("h4",{children:"Tiled"}),Object(z.jsx)("div",{className:"tile-preview-collection",children:Object(o.a)(Array(9).keys()).map((function(t){return Object(z.jsx)("img",{alt:"tile"+t,src:e.state.currentTileImg},"preview-"+t)}))}),Object(z.jsx)("div",{className:"dl-bar",children:Object(z.jsx)(g.a,{href:this.state.currentTileImg,download:this.state.tileType+".png",children:"Download"})})]}),Object(z.jsxs)("div",{className:"right",children:[Object(z.jsx)("h3",{children:"Tile Configuration"}),Object(z.jsx)("div",{className:"tile-option",children:Object(z.jsx)(x.a,{label:"Tile Type",value:this.state.tileType,onSlChange:function(t){return e.updateTileType(t)},children:w.map((function(e){return Object(z.jsx)(j.a,{value:e,children:T[e]},e)}))})}),this.getTileOptions(this.state.tileType)]})]})]}),Object(z.jsxs)("footer",{children:[Object(z.jsxs)("p",{children:["All images generated by this tool are free for use. (CC0) Tool available under the MIT license. (",Object(z.jsx)("a",{href:"https://github.com/cppchriscpp/2bit-tile-generator",target:"_blank",children:"Source"}),")"]}),Object(z.jsxs)("p",{children:["Heavily inspired by ",Object(z.jsx)("a",{href:"https://0x72.itch.io/2bitcharactergenerator",target:"_blank",children:"0x72's 2BitCharactersGenerator"})]}),Object(z.jsxs)("p",{children:["Wanna see the other stuff I do? Check out ",Object(z.jsx)("a",{href:"https://cpprograms.net",target:"_blank",children:"cpprograms.net"}),"."]})]})]})}}]),a}(i.a.Component)),N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,289)).then((function(t){var a=t.getCLS,r=t.getFID,i=t.getFCP,n=t.getLCP,l=t.getTTFB;a(e),r(e),i(e),n(e),l(e)}))};l.a.render(Object(z.jsx)(i.a.StrictMode,{children:Object(z.jsx)(R,{})}),document.getElementById("root")),N()}},[[288,1,2]]]);
//# sourceMappingURL=main.1a2c01b8.chunk.js.map