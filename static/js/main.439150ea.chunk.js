(this["webpackJsonp2bit-tile-generator"]=this["webpackJsonp2bit-tile-generator"]||[]).push([[0],{135:function(e,t,a){},164:function(e,t){},166:function(e,t){},282:function(e,t,a){},284:function(e,t,a){"use strict";a.r(t);var n=a(23),i=a.n(n),r=a(126),s=a.n(r),l=(a(135),a(18)),o=a(40),c=a(10),m=a.n(c),h=a(20),d=a(32),u=a(4),g=a(5),p=a(7),j=a(8),f=(a(136),a(65)),b=a(128),x=a(130),v=a(129),O=a(81),y=a(127),T=a.n(y),A=(a(282),a(9)),P=["grass","water"],w={grass:3,water:2,lava:3,rock:3,"brick wall":3,hole:0,plant:3},C={grass:[{name:"Short Blades",min:0,max:10,type:"range"},{name:"Tall Blades",min:0,max:10,type:"range"},{name:"Triangles",min:0,max:8,type:"range"}],water:[{name:"Lines",min:2,max:4,type:"range"},{name:"Deeper areas",min:0,max:3,type:"range",disabled:!0,defaultValue:0}],lava:[],rock:[],"brick wall":[],hole:[],plant:[]};function I(e,t){return(e%t+t)%t}var k=function(e){Object(p.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={tileType:"grass",tileProps:{},palette:[255,1145324799,2863311615,4294967295],imageWidth:16,imageHeight:16,currentTileImg:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},P.forEach((function(e){n.state.tileProps[e]={},C[e].forEach((function(t){void 0!==t.defaultValue?n.state.tileProps[e][t.name]=t.defaultValue:n.state.tileProps[e][t.name]=Math.floor(Math.random()*(t.max-t.min))+t.min}))})),n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.reloadImage()}},{key:"reRandomize",value:function(){var e={tileProps:Object(d.a)({},this.state.tileProps)};P.forEach((function(t){e.tileProps[t]={},C[t].forEach((function(a){a.disabled||(e.tileProps[t][a.name]=Math.floor(Math.random()*(a.max-a.min))+a.min)}))})),this.setState(e),this.reloadImage()}},{key:"download",value:function(){this.state.currentTileImg.replace("data:image")}},{key:"getRandomImageCoords",value:function(){return{x:Math.floor(Math.random()*this.state.imageWidth),y:Math.floor(Math.random()*this.state.imageHeight)}}},{key:"getTileOptions",value:function(e){var t=this;return C[e].map((function(a){if(a.disabled)return Object(A.jsx)("span",{},"disabled-setting-"+a.type+a.name);switch(a.type){case"range":return Object(A.jsxs)("div",{className:"tile-option",children:[Object(A.jsx)(v.a,{min:a.min,max:a.max,step:a.step||1,label:a.name,value:t.state.tileProps[e][a.name],onSlChange:function(n){return t.updateTileState(e,a.name,n.target.value)}},e+a.name),Object(A.jsxs)("div",{className:"below-range",children:[Object(A.jsx)("small",{className:"left",children:a.min}),Object(A.jsx)("small",{className:"mid",children:t.state.tileProps[e][a.name]}),Object(A.jsx)("small",{className:"right",children:a.max})]})]},"range-"+a.type+a.name);default:return console.error('Unknown tile option type "'.concat(a.type,'" found!'),a),Object(A.jsx)("span",{})}}))}},{key:"getCurrentTileImage",value:function(){var e=this;return new Promise((function(t,a){new T.a(16,16,e.state.palette[w[e.state.tileType]],(function(n,i){n&&a(n);var r=e.state.tileProps[e.state.tileType];switch(e.state.tileType){case"grass":for(var s=0;s<r["Short Blades"];s++){var l=e.getRandomImageCoords(),o=l.x,c=l.y;i.setPixelColor(e.state.palette[2],o,c)}for(var m=0;m<r["Tall Blades"];m++){var h=e.getRandomImageCoords(),d=h.x,u=h.y;i.setPixelColor(e.state.palette[2],d,u),i.setPixelColor(e.state.palette[2],d,0===u?e.state.imageHeight-1:u-1)}for(var g=0;g<r.Triangles;g++){var p=e.getRandomImageCoords(),j=p.x,f=p.y;i.setPixelColor(e.state.palette[2],j>0?j-1:e.state.imageWidth-1,f),i.setPixelColor(e.state.palette[2],j<e.state.imageWidth-1?j+1:0,f),i.setPixelColor(e.state.palette[2],j,f>0?f-1:e.state.imageHeight-1)}case"water":for(var b=function(t){var a=e.getRandomImageCoords(),n=a.x,r=a.y,s=Math.floor(4*Math.random())+3;i.scan(0,0,i.bitmap.width,i.bitmap.height,(function(t,a,l){var o=n-t,c=r-a;o*o+c*c<=s*s&&i.setPixelColor(e.state.palette[1],t,a)}))},x=0;x<r["Deeper areas"];x++)b();for(var v=0;v<r.Lines;v++){var O=e.getRandomImageCoords(),y=O.x,T=O.y,A=1===Math.floor(2*Math.random())?1:-1,P=1===Math.floor(2*Math.random())?1:-1,w=y,C=T;for(i.setPixelColor(e.state.palette[3],w,C),w=I(w+A,e.state.imageWidth),C=I(C+P,e.state.imageHeight);w!=y&&C!=T;)i.setPixelColor(e.state.palette[3],w,C),Math.random()>.3&&(w=I(w+A,e.state.imageWidth)),Math.random()>.3&&(C=I(C+P,e.state.imageHeight));i.setPixelColor(e.state.palette[3],w,C)}break;default:console.warn("Unimplemented tile type given!",e.state.tileType,"blank image ahoy")}i.getBase64Async("image/png").then(t,a)}))}))}},{key:"reloadImage",value:function(){var e=Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getCurrentTileImage();case 3:e.t1=e.sent,e.t2={currentTileImg:e.t1},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTileType",value:function(e){this.setState({tileType:e.target.value}),this.reloadImage()}},{key:"updateTileState",value:function(e,t,a){this.setState({tileProps:Object(d.a)(Object(d.a)({},this.state.tileProps),{},Object(o.a)({},e,Object(d.a)(Object(d.a)({},this.state.tileProps[e]),{},Object(o.a)({},t,a))))}),this.reloadImage()}},{key:"render",value:function(){var e=this;return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("header",{className:"App-header",children:Object(A.jsx)("h1",{children:"2Bit Tile Generator"})}),Object(A.jsxs)("section",{children:[Object(A.jsx)("p",{}),Object(A.jsxs)("div",{className:"control-bar",children:[Object(A.jsx)(O.a,{content:"Randomize the settings for all tiles.",children:Object(A.jsx)(f.a,{onClick:function(){return e.reRandomize()},children:"Randomize Settings"})}),Object(A.jsx)(O.a,{content:"Regenerate tile image with the current settings",children:Object(A.jsx)(f.a,{onClick:function(){return e.reloadImage()},children:"Regenerate"})})]}),Object(A.jsxs)("div",{className:"configurator",children:[Object(A.jsxs)("div",{className:"left",children:[Object(A.jsx)("h3",{children:"Tile Preview"}),Object(A.jsx)("h4",{children:"Single"}),Object(A.jsx)("img",{className:"tile-preview",alt:"Tile Preview",src:this.state.currentTileImg}),Object(A.jsx)("h4",{children:"Tiled"}),Object(A.jsx)("div",{className:"tile-preview-collection",children:Object(l.a)(Array(9).keys()).map((function(t){return Object(A.jsx)("img",{alt:"tile"+t,src:e.state.currentTileImg},"preview-"+t)}))}),Object(A.jsx)("div",{className:"dl-bar",children:Object(A.jsx)(f.a,{href:this.state.currentTileImg,download:this.state.tileType+".png",children:"Download"})})]}),Object(A.jsxs)("div",{className:"right",children:[Object(A.jsx)("h3",{children:"Tile Configuration"}),Object(A.jsx)("div",{className:"tile-option",children:Object(A.jsx)(b.a,{label:"Tile Type",value:this.state.tileType,onSlChange:function(t){return e.updateTileType(t)},children:P.map((function(e){return Object(A.jsx)(x.a,{value:e,children:e},e)}))})}),this.getTileOptions(this.state.tileType)]})]})]})]})}}]),a}(i.a.Component),M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,285)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),r(e),s(e)}))};s.a.render(Object(A.jsx)(i.a.StrictMode,{children:Object(A.jsx)(k,{})}),document.getElementById("root")),M()}},[[284,1,2]]]);
//# sourceMappingURL=main.439150ea.chunk.js.map